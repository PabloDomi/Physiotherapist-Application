import{j as t}from"./jsx-runtime-DoxjgJx5.js";import{L}from"./ListExpandExercisesCustom-l_NEBNIM.js";import{u as c}from"./useGlobalState-BC4VoH9w.js";import{u as S}from"./usePatients-D6hsu-5h.js";import{r as g}from"./index-Cu9bd8lq.js";import{G as _}from"./GetDataService-Bc2cEZCe.js";import{F as o}from"./Form-8tuLUNbZ.js";import{M as y}from"./Modal-DvMOhwvL.js";import{L as M}from"./Loader-BQB4JS2V.js";import{L as v}from"./KeyboardDoubleArrowRightOutlined-DPCburiO.js";import{B as N}from"./Button-C_g_TbZn.js";import{E as F,D as w}from"./EditOutlined-CVcvQZMG.js";function A(){const l=c(r=>r.theme),p=c(r=>r.showDeleteExerciseModal),d=c(r=>r.toggleDeleteExerciseModal),n=c(r=>r.exercises),i="Eliminar ejercicio",[u,m]=g.useState(void 0),x=t.jsx(t.Fragment,{children:t.jsx(o,{children:t.jsxs(o.Group,{className:"mb-3",controlId:"DeleteExerciseForm.Select1",onClick:r=>r.stopPropagation(),children:[t.jsx(o.Label,{style:{marginLeft:"0.2rem"},children:"Seleccione la ejercicio a eliminar"}),t.jsxs(o.Select,{onChange:r=>{r.stopPropagation(),m(Number(r.target.value))},autoFocus:!0,"aria-label":"Default select",className:l==="dark"?"dark-input":"dark-input2",children:[t.jsx("option",{children:"Seleccione el ejercicio a eliminar"}),n==null?void 0:n.map((r,h)=>t.jsx("option",{value:r.id,children:r.name},h))]})]})})});return{showModalDeleteExercise:p,toggleModalDeleteExercise:d,modalTitleDeleteExercise:i,modalContentDeleteExercise:x,DeleteExerciseData:u}}function I(){const l=c(e=>e.theme),p=c(e=>e.showEditExerciseModal),d=c(e=>e.toggleEditExerciseModal),n=c(e=>e.exercises),[i,u]=g.useState(void 0),m=c(e=>e.routines),x="Editar ejercicio",[r,h]=g.useState({id:i==null?void 0:i.id,name:i==null?void 0:i.name,description:i==null?void 0:i.description,routine_ids:Array.isArray(i==null?void 0:i.routine_ids)?i.routine_ids:[],routine:Array.isArray(i==null?void 0:i.routine)?i==null?void 0:i.routine:[]}),j=g.useCallback(e=>{h({id:e.id,name:e.name,description:e.description,routine_ids:Array.isArray(e==null?void 0:e.routine_ids)?e.routine_ids:[],routine:Array.isArray(e.routine)?e.routine:[]})},[]);g.useEffect(()=>{i&&j(i)},[i,j]);const E=()=>{if(i!=null&&i.routine&&Array.isArray(i.routine)){const e=[],s=i.routine_ids;return i.routine.forEach(a=>{i!=null&&i.routine_ids&&s.includes(a.id)&&(e==null||e.push(a))}),e}else return[]},D=()=>{const e=m==null?void 0:m.filter(s=>!E().some(a=>a.id===s.id));return e==null?void 0:e.map((s,a)=>t.jsxs("li",{style:{margin:"0.2rem"},children:[t.jsx(o.Check.Input,{style:{margin:"0.3rem",marginRight:"0.5rem"},type:"checkbox",defaultChecked:!1,value:s.id,onChange:C=>{C.target.checked===!0?f(s):k(s)}},a),t.jsx(o.Check.Label,{children:s.name})]},a))},f=e=>{var s;(s=r==null?void 0:r.routine_ids)==null||s.push(e.id)},k=e=>{var a,C;const s=(a=r==null?void 0:r.routine_ids)==null?void 0:a.indexOf(e.id);s!==void 0&&((C=r==null?void 0:r.routine_ids)==null||C.splice(s,1))},b=t.jsxs(t.Fragment,{children:[!i&&t.jsx(o,{children:t.jsxs(o.Group,{className:"mb-3",controlId:"EditExerciseForm.Select1",onClick:e=>e.stopPropagation(),children:[t.jsx(o.Label,{style:{marginLeft:"0.2rem"},children:"Seleccione el ejercicio a editar"}),t.jsxs(o.Select,{onChange:e=>{e.stopPropagation(),_.getExerciseById(e.target.value).then(s=>{u(Object(s))})},autoFocus:!0,"aria-label":"Default select",className:l==="dark"?"dark-input":"dark-input2",children:[t.jsx("option",{children:"Seleccione un ejercicio"}),n==null?void 0:n.map((e,s)=>t.jsx("option",{value:e.id,children:e.name},s))]})]})}),i&&t.jsxs(o,{children:[t.jsxs(o.Group,{className:"mb-3",controlId:"EditExerciseForm.ControlInput2",onClick:e=>e.stopPropagation(),children:[t.jsx(o.Label,{children:"Descripción"}),t.jsx(o.Control,{onChange:e=>{e.stopPropagation(),h({...r,description:e.target.value})},type:"text",defaultValue:i==null?void 0:i.description,placeholder:"Descripción de la rutina",autoFocus:!0,className:l==="dark"?"dark-input":"dark-input2"})]}),t.jsxs(o.Group,{className:"mb-3",controlId:"EditExerciseForm.Select1",onClick:e=>e.stopPropagation(),children:[t.jsx(o.Label,{style:{marginLeft:"0.2rem"},children:"Seleccione a que rutinas agregar el ejercicio"}),t.jsxs(o.Check,{type:"checkbox",onChange:e=>{e.stopPropagation(),h({...r,routine_ids:i!=null&&i.routine_ids?[...i.routine_ids,Number(e.target.value)]:[Number(e.target.value)]})},autoFocus:!0,"aria-label":"Default select",className:l==="dark"?"dark-input":"dark-input2",children:[t.jsx("ul",{style:{marginBottom:"0px"},children:E().map((e,s)=>t.jsxs("li",{style:{margin:"0.2rem"},children:[t.jsx(o.Check.Input,{style:{margin:"0.3rem",marginRight:"0.5rem"},type:"checkbox",defaultChecked:!0,value:e.id,onChange:a=>{a.target.checked===!0?f(e):k(e)}}),t.jsx(o.Check.Label,{children:e.name})]},s))}),t.jsx("ul",{children:D()})]})]})]})]});return{showModalEditExercise:p,toggleModalEditExercise:d,modalTitleEditExercise:x,modalContentEditExercise:b,EditExerciseData:r,setExercise:u}}const P=({theme:l})=>{const{isLoading:p}=S(),d=c(s=>s.routines),n=d==null?void 0:d.flatMap(s=>s.exercises),i=c(s=>s.setExercises),{showModalEditExercise:u,toggleModalEditExercise:m,modalTitleEditExercise:x,modalContentEditExercise:r,EditExerciseData:h,setExercise:j}=I(),{showModalDeleteExercise:E,toggleModalDeleteExercise:D,modalTitleDeleteExercise:f,modalContentDeleteExercise:k,DeleteExerciseData:b}=A(),e=async()=>{if(n){const s=n.filter(a=>a.id!==b);i(s)}};return t.jsxs(t.Fragment,{children:[p&&t.jsx(M,{}),!p&&t.jsxs("section",{className:l==="light"?"rutinas-section rutinas-background-light":"rutinas-section rutinas-background-dark",children:[t.jsx("h1",{id:"title-exercises",children:"Lista de Ejercicios"}),t.jsx("main",{className:"rutinas-container",children:t.jsx(v,{sx:{width:"100%",maxWidth:900,background:l==="dark"?"linear-gradient(270deg, #262726, #3b3c3b)":"linear-gradient(90deg, #A1e1a1, #67c467)",boxShadow:"0px 4px 6px #4368bc"},component:"nav",className:"rutinas-list",children:n==null?void 0:n.map((s,a)=>t.jsx(L,{exercise:s},a))})}),t.jsxs("aside",{className:"rutinas-aside",children:[t.jsxs(N,{onClick:m,variant:"contained",className:"btn-exercise",children:["Editar ejercicio",t.jsx(F,{})]}),u&&t.jsx(y,{show:u,title:x,content:r,action:"editExercise",data:h,behavior:()=>{j(void 0)}}),t.jsxs(N,{onClick:D,variant:"contained",className:"btn-exercise",children:["Eliminar ejercicio",t.jsx(w,{})]}),E&&t.jsx(y,{show:E,title:f,content:k,action:"deleteExercise",data:b,behavior:e})]})]})]})};P.__docgenInfo={description:"",methods:[],displayName:"Ejercicios"};export{P as E};
