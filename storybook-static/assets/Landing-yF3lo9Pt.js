import{j as e}from"./jsx-runtime-DoxjgJx5.js";import{r as t}from"./index-Cu9bd8lq.js";import{r as L,l as E}from"./schemas-rfPO-qWq.js";import{u}from"./index.esm-Bebovizm.js";import{t as p}from"./zod-Cul73vRk.js";import{E as w}from"./ErrorAlert-sYkhl1t5.js";import{S as g}from"./SignUpFormField-C0w1utYX.js";import{L as f}from"./LoginFormField-BwS1s3rO.js";import{L as N}from"./LoginService-CmO1VqF6.js";import{a as C,b as R}from"./Constants-AkoCtDvz.js";import{u as T}from"./useGlobalState-BC4VoH9w.js";import{L as F}from"./index-1VaAFRt_.js";import{a as I}from"./index-CeseEJRd.js";const k=async c=>{try{const{data:i}=await C.post(`${R}Sign/Register`,c);return i}catch{throw new Error("Error en el registro de usuario")}},D=()=>{const c=T(s=>s.setUser),i=I(),[r,h]=t.useState(null),[m,o]=t.useState({message:"",severity:"error"}),{handleSubmit:x,control:d,formState:{errors:n}}=u({resolver:p(L),defaultValues:{name:"",email:"",password:""}}),a=u({resolver:p(E),defaultValues:{email:"",password:""}});t.useEffect(()=>{h(document.getElementById("landing-container"))},[r]),t.useEffect(()=>{n.name&&o({message:"El nombre debe tener al menos 6 caracteres",severity:"error"}),n.email&&o({message:"Debe introducir un email válido",severity:"error"}),n.password&&o({message:"La contraseña debe tener al menos 6 caracteres",severity:"error"})},[n]),t.useEffect(()=>{a.formState.errors.email&&o({message:"Debe introducir un email válido",severity:"error"}),a.formState.errors.password&&o({message:"La contraseña debe tener al menos 6 caracteres",severity:"error"})},[a.formState.errors]);const v=s=>{s.preventDefault(),r==null||r.classList.add("active")},j=s=>{s.preventDefault(),r==null||r.classList.remove("active")},y=s=>{try{k(s),o({message:"Registro exitoso",severity:"success"}),r==null||r.classList.remove("active")}catch{throw new Error("Error en el registro de usuario")}},S=async s=>{try{const l=await N.LoginService(s),b=JSON.stringify(l);localStorage.setItem("user",b),c(l),o({message:"Inicio de sesión exitoso",severity:"success"}),i("/home")}catch{throw o({message:"Email o contraseña incorrectos",severity:"error"}),new Error("Error en el login de usuario")}};return e.jsxs("main",{className:"landing-background",children:[m&&e.jsx(w,{message:m.message,severity:m.severity}),e.jsxs("div",{className:"landing-container",id:"landing-container",children:[e.jsx("div",{className:"form-container sign-up",children:e.jsxs("form",{style:{boxSizing:"border-box"},onSubmit:x(y),children:[e.jsx("h1",{children:"Crear Cuenta"}),e.jsx(g,{name:"name",placeholder:"Tu nombre completo",inputType:"text",formControl:d}),e.jsx(g,{name:"email",placeholder:"you@example.com",inputType:"text",formControl:d}),e.jsx(g,{name:"password",placeholder:"*******",inputType:"password",formControl:d}),e.jsx("button",{children:"Registrarse"})]})}),e.jsx("div",{className:"form-container sign-in",children:e.jsxs("form",{onSubmit:a.handleSubmit(S),children:[e.jsx("h1",{children:"Iniciar Sesión"}),e.jsx(f,{name:"email",placeholder:"you@example.com",inputType:"text",formControl:a.control}),e.jsx(f,{name:"password",placeholder:"*********",inputType:"password",formControl:a.control}),e.jsx(F,{to:"/activateAccount/false",children:"¿Olvidaste la contraseña?"}),e.jsx("button",{children:"Iniciar Sesión"})]})}),e.jsx("div",{className:"toggle-container",children:e.jsxs("div",{className:"toggle",children:[e.jsxs("div",{className:"toggle-panel toggle-left",children:[e.jsx("h1",{children:"¡Bienvenido de nuevo!"}),e.jsx("p",{children:"Introduce tu información personal para usar todas las funcionalidades"}),e.jsx("button",{onClick:j,className:"hidden",id:"login",children:"Iniciar Sesión"})]}),e.jsxs("div",{className:"toggle-panel toggle-right",children:[e.jsx("h1",{children:"¿Tienes cuenta?"}),e.jsx("p",{children:"Registrate con tu información personal para usar todas las funcionalidades"}),e.jsx("button",{onClick:v,className:"hidden",id:"register",children:"Registrarse"})]})]})})]})]})};D.__docgenInfo={description:"",methods:[],displayName:"Landing"};export{D as L};
