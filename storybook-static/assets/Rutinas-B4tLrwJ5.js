import{j as e}from"./jsx-runtime-DoxjgJx5.js";import"./ListExpandExercises-CO9Zj70a.js";import{u as d}from"./useGlobalState-BC4VoH9w.js";import{L as B}from"./ListExpandRoutines-BFrfJhSS.js";import{u as q}from"./usePatients-D6hsu-5h.js";import{L as J}from"./Loader-BQB4JS2V.js";import{M as E}from"./Modal-DvMOhwvL.js";import{r as x}from"./index-Cu9bd8lq.js";/* empty css               */import{F as a}from"./Form-8tuLUNbZ.js";import{G as F}from"./GetDataService-Bc2cEZCe.js";import{e as H}from"./Constants-AkoCtDvz.js";import{J as W,A as K}from"./index-B9YNeJOq.js";import{L as Q}from"./KeyboardDoubleArrowRightOutlined-DPCburiO.js";import{B as _}from"./Button-C_g_TbZn.js";import{c as S}from"./createSvgIcon-BTnAIxLp.js";import{E as U,D as X}from"./EditOutlined-CVcvQZMG.js";function Y(r){const m=d(t=>t.theme),p=d(t=>t.showAddExerciseToRoutineModal),l=d(t=>t.toggleAddExerciseToRoutineModal),i="Agregar Ejercicio a Rutina",[o,s]=x.useState(null),h=e.jsxs(a,{children:[e.jsxs(a.Group,{className:"mb-3",controlId:"AddExerciseToRoutineForm.ControlInput1",children:[e.jsx(a.Label,{children:"Nombre"}),e.jsxs(a.Select,{onChange:t=>s({name:t.target.value,description:o==null?void 0:o.description,routine_name:o==null?void 0:o.routine_name}),autoFocus:!0,"aria-label":"Default select",className:m==="dark"?"dark-input":"dark-input2",children:[e.jsx("option",{children:"Seleccione el ejercicio"}),H.map((t,u)=>e.jsx("option",{value:t,children:t},u))]})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"AddExerciseToRoutineForm.ControlInput2",children:[e.jsx(a.Label,{children:"Descripción del Ejercicio"}),e.jsx(a.Control,{onChange:t=>s({name:o==null?void 0:o.name,description:t.target.value,routine_name:o==null?void 0:o.routine_name}),type:"text",placeholder:"Descripción del ejercicio",autoFocus:!0,className:m==="dark"?"dark-input":"dark-input2"})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"AddExerciseToRoutineForm.Select1",children:[e.jsx(a.Label,{style:{marginLeft:"0.2rem"},children:"Seleccione la rutina a la que agregar este ejercicio"}),e.jsxs(a.Select,{onChange:t=>s({name:o==null?void 0:o.name,description:o==null?void 0:o.description,routine_name:t.target.value}),autoFocus:!0,"aria-label":"Default select",className:m==="dark"?"dark-input":"dark-input2",children:[e.jsx("option",{children:"Seleccione la rutina"}),r==null?void 0:r.map((t,u)=>e.jsx("option",{value:t.name,children:t.name},u))]})]})]});return{showModalAddExerciseToRoutine:p,toggleModalAddExerciseToRoutine:l,modalTitleAddExerciseToRoutine:i,modalContentAddExerciseToRoutine:h,theme:m,AddExerciseToRoutineData:o}}function Z(){const r=d(t=>t.theme),m=d(t=>t.showAddRoutineModal),p=d(t=>t.toggleAddRoutineModal),l=d(t=>t.patients),i="Agregar Rutina",[o,s]=x.useState(void 0),h=e.jsxs(a,{children:[e.jsxs(a.Group,{className:"mb-3",controlId:"AddRoutineForm.ControlInput1",children:[e.jsx(a.Label,{children:"Nombre"}),e.jsx(a.Control,{onChange:t=>s({name:t.target.value,description:o==null?void 0:o.description,estimatedTime:o==null?void 0:o.estimatedTime,patient_id:o==null?void 0:o.patient_id}),type:"text",placeholder:"Ingrese el nombre de la rutina",autoFocus:!0,className:r==="dark"?"dark-input":"dark-input2"})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"AddRoutineForm.ControlInput2",children:[e.jsx(a.Label,{children:"Descripción"}),e.jsx(a.Control,{onChange:t=>s({name:o==null?void 0:o.name,description:t.target.value,estimatedTime:o==null?void 0:o.estimatedTime,patient_id:o==null?void 0:o.patient_id}),type:"text",placeholder:"Describa brevemente la rutina",autoFocus:!0,className:r==="dark"?"dark-input":"dark-input2"})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"AddRoutineForm.ControlInput3",children:[e.jsx(a.Label,{children:"Tiempo estimado para completar la rutina"}),e.jsx(a.Control,{onChange:t=>s({name:o==null?void 0:o.name,description:o==null?void 0:o.description,estimatedTime:Number(t.target.value),patient_id:o==null?void 0:o.patient_id}),type:"text",placeholder:"Ingrese el tiempo estimado en minutos",className:r==="dark"?"dark-input":"dark-input2"})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"AddRoutineForm.Select1",children:[e.jsx(a.Label,{style:{marginLeft:"0.2rem"},children:"Seleccione el paciente para la rutina"}),e.jsxs(a.Select,{onChange:t=>s({name:o==null?void 0:o.name,description:o==null?void 0:o.description,estimatedTime:o==null?void 0:o.estimatedTime,patient_id:Number(t.target.value)}),autoFocus:!0,"aria-label":"Default select",className:r==="dark"?"dark-input":"dark-input2",children:[e.jsx("option",{children:"Seleccione el paciente al que añadirle la rutina"}),l==null?void 0:l.map((t,u)=>e.jsx("option",{value:t.id,children:t.name+" "+t.surname},u))]})]})]});return{showModalAddRoutine:m,toggleModalAddRoutine:p,modalTitleAddRoutine:i,modalContentAddRoutine:h,theme:r,AddRoutineData:o}}function $(){const r=d(t=>t.theme),m=d(t=>t.showDeleteRoutineModal),p=d(t=>t.toggleDeleteRoutineModal),l=d(t=>t.routines),i="Eliminar Rutina",[o,s]=x.useState(void 0),h=e.jsx(e.Fragment,{children:e.jsx(a,{children:e.jsxs(a.Group,{className:"mb-3",controlId:"DeleteRoutineForm.Select1",onClick:t=>t.stopPropagation(),children:[e.jsx(a.Label,{style:{marginLeft:"0.2rem"},children:"Seleccione la rutina a eliminar"}),e.jsxs(a.Select,{onChange:t=>{t.stopPropagation(),s({routine_id:Number(t.target.value)})},autoFocus:!0,"aria-label":"Default select",className:r==="dark"?"dark-input":"dark-input2",children:[e.jsx("option",{children:"Seleccione la rutina a eliminar"}),l==null?void 0:l.map((t,u)=>e.jsx("option",{value:t.id,children:t.name},u))]})]})})});return{showModalDeleteRoutine:m,toggleModalDeleteRoutine:p,modalTitleDeleteRoutine:i,modalContentDeleteRoutine:h,DeleteRoutineData:o}}function D(){var C,R,f,N;const r=d(n=>n.theme),m=d(n=>n.showEditRoutineModal),p=d(n=>n.toggleEditRoutineModal),l=d(n=>n.routines),[i,o]=x.useState(void 0),s=d(n=>n.patients),h="Actualizar Rutina",[t,u]=x.useState({routine_id:i==null?void 0:i.id,name:i==null?void 0:i.name,description:i==null?void 0:i.description,estimatedTime:i==null?void 0:i.estimatedTime,patient_id:i==null?void 0:i.patient_id}),b=x.useCallback(n=>{u({routine_id:n.id,name:n.name,description:n.description,estimatedTime:n.estimatedTime,patient_id:n.patient_id})},[]);x.useEffect(()=>{i&&b(i)},[i,b]);const k=e.jsxs(e.Fragment,{children:[!i&&e.jsx(a,{children:e.jsxs(a.Group,{className:"mb-3",controlId:"EditRoutineForm.Select1",onClick:n=>n.stopPropagation(),children:[e.jsx(a.Label,{style:{marginLeft:"0.2rem"},children:"Seleccione la rutina a actualizar"}),e.jsxs(a.Select,{onChange:n=>{n.stopPropagation(),F.getRoutineById(Number(n.target.value)).then(g=>{o(Object(g))})},autoFocus:!0,"aria-label":"Default select",className:r==="dark"?"dark-input":"dark-input2",children:[e.jsx("option",{children:"Seleccione la rutina a actualizar"}),l==null?void 0:l.map((n,g)=>e.jsx("option",{value:n.id,children:n.name},g))]})]})}),i&&e.jsxs(a,{children:[e.jsxs(a.Group,{className:"mb-3",controlId:"EditRoutineForm.ControlInput1",onClick:n=>n.stopPropagation(),children:[e.jsx(a.Label,{children:"Nombre"}),e.jsx(a.Control,{onChange:n=>{n.stopPropagation(),u({...t,name:n.target.value})},defaultValue:i==null?void 0:i.name,type:"text",placeholder:"Nombre de la rutina",autoFocus:!0,className:r==="dark"?"dark-input":"dark-input2"})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"EditRoutineForm.ControlInput2",onClick:n=>n.stopPropagation(),children:[e.jsx(a.Label,{children:"Descripción"}),e.jsx(a.Control,{onChange:n=>{n.stopPropagation(),u({...t,description:n.target.value})},type:"text",defaultValue:i==null?void 0:i.description,placeholder:"Descripción de la rutina",autoFocus:!0,className:r==="dark"?"dark-input":"dark-input2"})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"EditRoutineForm.ControlInput3",onClick:n=>n.stopPropagation(),children:[e.jsx(a.Label,{children:"Tiempo estimado para completar la rutina"}),e.jsx(a.Control,{onChange:n=>{n.stopPropagation(),u({...t,estimatedTime:Number(n.target.value)})},type:"text",defaultValue:i==null?void 0:i.estimatedTime,placeholder:"Tiempo estimado en minutos",className:r==="dark"?"dark-input":"dark-input2"})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"EditRoutineForm.Select1",onClick:n=>n.stopPropagation(),children:[e.jsx(a.Label,{style:{marginLeft:"0.2rem"},children:"Seleccione el paciente para la rutina actualizada"}),e.jsxs(a.Select,{onChange:n=>{n.stopPropagation(),u({...t,patient_id:Number(n.target.value)})},autoFocus:!0,"aria-label":"Default select",className:r==="dark"?"dark-input":"dark-input2",children:[e.jsx("option",{value:i==null?void 0:i.patient_id,children:((C=s==null?void 0:s.find(n=>n.id===(i==null?void 0:i.patient_id)))==null?void 0:C.name)+" "+((R=s==null?void 0:s.find(n=>n.id===(i==null?void 0:i.patient_id)))==null?void 0:R.surname)},i==null?void 0:i.patient_id),(f=s==null?void 0:s.filter(n=>n.id!==(i==null?void 0:i.patient_id)))==null?void 0:f.map((n,g)=>e.jsx("option",{value:n.id,children:n.name+" "+n.surname},g))]})]}),e.jsx(W,{})]})]});if((t==null?void 0:t.patient_id)!==(i==null?void 0:i.patient_id)&&((N=t==null?void 0:t.patient_id)==null?void 0:N.toString())!==void 0&&(i==null?void 0:i.patient_id)!==void 0)try{F.checkHasRoutine(t==null?void 0:t.patient_id).then(({hasRoutine:n})=>{if(n){K.error("El paciente ya tiene una rutina asignada");return}})}catch(n){throw console.error(n),new Error("Error al obtener los pacientes")}return{showModalEditRoutine:m,toggleModalEditRoutine:p,modalTitleEditRoutine:h,modalContentEditRoutine:k,EditRoutineData:t,setRutina:o}}const ee=S(e.jsx("path",{d:"M20.5 6c-2.61.7-5.67 1-8.5 1s-5.89-.3-8.5-1L3 8c1.86.5 4 .83 6 1v13h2v-6h2v6h2V9c2-.17 4.14-.5 6-1zM12 6c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2"}),"AccessibilityNewOutlined"),te=S(e.jsx("path",{d:"M20.57 14.86 22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"}),"FitnessCenterOutlined"),oe=({theme:r})=>{const{isLoading:m}=q(),p=d(c=>c.setRoutines),l=d(c=>c.routines),{showModalAddRoutine:i,toggleModalAddRoutine:o,modalTitleAddRoutine:s,modalContentAddRoutine:h,AddRoutineData:t}=Z(),u=async()=>{try{const c=await F.getRoutines();p(c),p(c)}catch(c){throw console.error(c),new Error("Error al obtener los pacientes")}},b=c=>{c.preventDefault(),u(),o()},{showModalAddExerciseToRoutine:k,toggleModalAddExerciseToRoutine:C,modalTitleAddExerciseToRoutine:R,modalContentAddExerciseToRoutine:f,AddExerciseToRoutineData:N}=Y(l),{showModalDeleteRoutine:n,toggleModalDeleteRoutine:g,modalTitleDeleteRoutine:T,modalContentDeleteRoutine:M,DeleteRoutineData:j}=$(),{showModalEditRoutine:L,toggleModalEditRoutine:I,modalTitleEditRoutine:w,modalContentEditRoutine:y,EditRoutineData:G,setRutina:P}=D(),A=c=>{c.stopPropagation(),g()},O=()=>{if(l){const c=l.filter(v=>v.id!==(j==null?void 0:j.routine_id));p(c)}},z=c=>{c.stopPropagation(),I()},V=c=>{c.preventDefault(),C()};return e.jsxs(e.Fragment,{children:[m&&e.jsx(J,{}),!m&&e.jsxs("section",{className:r==="light"?"rutinas-section rutinas-background-light":"rutinas-section-dark rutinas-background-dark",children:[e.jsx("h1",{children:"Lista de Rutinas"}),e.jsx("main",{className:"rutinas-container",children:e.jsx(Q,{sx:{background:r==="dark"?"linear-gradient(270deg, #262726, #3b3c3b)":"linear-gradient(90deg, #A1e1a1, #67c467)"},component:"nav",id:"rutinas-list",children:l==null?void 0:l.map((c,v)=>e.jsx(B,{rutina:c,rutinas:l,setRoutines:p,componentId:v},v))})}),e.jsxs("aside",{className:"rutinas-aside",children:[e.jsxs(_,{onClick:b,variant:"contained",className:r==="light"?"btn-agregar-rutina-light":"btn-agregar-rutina",children:["Agregar Rutina",e.jsx(te,{className:"iconos-rutinas"})]}),i&&e.jsx(E,{show:i,title:s,content:h,action:"addRoutine",data:t,behavior:u}),e.jsxs(_,{id:r==="light"?"btn-agregar-ej-light":"btn-agregar-ej",variant:"contained",onClick:V,children:["Añadir Ejercicio a Rutina",e.jsx(ee,{className:"iconos-rutinas"})]}),k&&e.jsx(E,{show:k,title:R,content:f,action:"addExerciseToRoutine",data:N,behavior:()=>{}}),e.jsxs(_,{onClick:z,id:r==="light"?"btn-lista-light":"btn-lista-dark",variant:"contained",children:["Edit Routine",e.jsx(U,{className:"iconos-rutinas"})]}),L&&e.jsx(E,{show:L,title:w,content:y,action:"editRoutine",data:G,behavior:()=>{P(void 0)}}),e.jsxs(_,{onClick:A,id:r==="light"?"btn-lista-light":"btn-lista-dark",variant:"contained",children:["Delete Routine",e.jsx(X,{className:"iconos-rutinas"})]}),n&&e.jsx(E,{show:n,title:T,content:M,action:"deleteRoutine",data:j==null?void 0:j.routine_id,behavior:O})]})]})]})};oe.__docgenInfo={description:"",methods:[],displayName:"Rutinas"};export{oe as R};
